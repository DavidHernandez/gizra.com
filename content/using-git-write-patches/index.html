<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Using git to write patches</title><meta name=viewport content="width=device-width"><link rel=stylesheet href=/css/main.ff28.css><link href="http://fonts.googleapis.com/css?family=Abril+Fatface" rel=stylesheet type=text/css></head><body><header class=white><div class=container><div class=logo><a href="/">gizra</a></div><nav id=nav role=navigation class="navbar navbar-default nav-fixed"><div class=navbar-header><button data-target=.navbar-collapse data-toggle=collapse class=navbar-toggle type=button><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href=/products>Products</a></li><li><a href=/#about>About</a></li><li><a href=/#work>Work</a></li><li><a href=/#code>Showcase</a></li><li><a href=/blog class=active>Blog</a></li><li><a href=/#contact>Contact</a></li></ul></div></nav></div><!-- End of container --></header><section id=post-page><div class=background><img src=/images/post/background.2707.png></div><div class=ballons></div><div class=post-back><a href=/blog><img src=/images/post/post-back.fca6.png></a></div><div class=content><div class=container><div class=row><div class="col-md-12 post"><div class=row><div class="post-label col-xs-12"><a href="/content/using-git-write-patches/">Using git to write patches</a></div></div><div class="row small-row"><div class="date col-md-3 col-sm-3 col-xs-4">27 Dec 2009</div><div class="seprator col-md-1 col-sm-1 col-xs-1">|</div><div class="author col-md-8 col-sm-7 col-xs-6">By Amitai Burstein</div></div><div class="row small-row"><div class="tags col-sm-9"><ul class=inline><li><a href=/tags.html#Drupal-planet-ref>Drupal-planet</a></li></ul></div><div class="comments-count col-sm-3"><a href=http://www.gizra.com/content/using-git-write-patches/#disqus_thread></a></div></div><div class=row><div class="col-xs-12 post-content"><p>Drupal is using CVS for version controlling core and contrib modules. CVS has diffing options, but it becomes annoying when you try adding or deleting new files. Here&#39;s an example of how to use git to patch a contrib module - Organic groups.</p><!-- more --><ol><li>In OG's project page click on the <a href=http://drupal.org/project/og/cvs-instructions>CVS instructions</a> and select the version you want to patch. ``` cvs -z6 -d:pserver:anonymous:anonymous@cvs.drupal.org:/cvs/drupal-contrib checkout -d og-DRUPAL-6--2 -r DRUPAL-6--2 contributions/modules/og/ ```</li><li>Go inside the directory you just checked out from CVS. ``` cd og-DRUPAL-6--2 ```</li><li>Make the folder and all sub-folder a git repository, and add all the files. ``` git init git add . git commit -m "Initial commit of the Organic groups module." ```</li><li>No we have a _master branch with the original module. We can create a new git branch and work on this new branch - edit files, move files around, create new directories, etc'. ``` git checkout -b new-branch ```</li><li>The _new-branch is now the active branch. Do some changes to code, and commit them. ``` git commit -a -m "A meaningful commit description." ```</li><li>In order to create a diff file, we need to switch back to the master branch, and create a diff against our new-branch. Note that we use the ```--no-prefix``` command to follow the patch creation standard of Drupal. ``` git checkout master git diff --no-prefix master new-branch > [issue-id]-[patch description]-[comment number].patch ```</li><li>We can delete the temporary branch. ``` git branch -D new-branch ```</li></ol><p>If you want to work only with git, and skip the CVS part, have a look at <a href="http://git.drupalfr.org/">git.drupalfr.org</a>.</p></div></div><div class=row><div class="col-xs-12 bottom-dash"></div></div><div class="row post-nav"><div class=col-xs-6><div class=previous><a href="/content/outsourcing-kittens/">Previous</a></div><a href="/content/outsourcing-kittens/" class=prev-text>Outsourcing and Kittens</a></div><div class=col-xs-6><div class=next><a href="/content/organic-groups-7/">Next</a></div><a href="/content/organic-groups-7/" class=next-text>Organic groups 7!</a></div></div><div class="row author-details"><div class="col-md-1 image-wrapper"><img src=/images/team/amitaibu.4179.jpg class=img-responsive></div><div class="col-md-11 text-wrapper"><span class=name>Amitai Burstein</span> <span class=twitter>(@amitaibu)</span><div class=title>CTO, Co-Owner</div><div class=bio>Maintainer of Organic groups, the Message stack, and co-maintainer of Drupal 8's Entity reference. Also likes climbing boulders.</div></div></div><div class=row><div class="col-xs-12 bottom-dash-small"></div></div></div></div></div></div></section><div id=disqus_thread></div><script type=text/javascript>var disqus_developer = 1;
    var disqus_shortname = 'gizra';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><script type=text/javascript>var disqus_shortname = 'gizra';

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());</script><script src=/_bower_components/jquery/jquery.js></script><script src=scripts/plugins.js></script><script src=/js/scripts.fb35.js></script><!-- Google Analytics --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');  // Replace with your property ID.
  ga('send', 'pageview');</script><!-- End Google Analytics --></body></html>