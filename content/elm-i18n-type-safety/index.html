<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        
    

<title>Elm i18n and Type Safety</title>

        <meta name="description" content="">
        <meta name="keywords" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <!-- Favicon for all platforms -->
      <link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.b3df.png">
      <link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-touch-icon-60x60.a84d.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.664d.png">
      <link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-touch-icon-76x76.faf5.png">
      <link rel="apple-touch-icon" sizes="114x114" href=/"images/favicons/apple-touch-icon-114x114.png">
      <link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.d810.png">
      <link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-touch-icon-144x144.1807.png">
      <link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-touch-icon-152x152.71bf.png">
      <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon-180x180.a9f0.png">
      <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.c391.png" sizes="32x32">
      <link rel="icon" type="image/png" href="/images/favicons/favicon-194x194.e5f8.png" sizes="194x194">
      <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.8557.png" sizes="96x96">
      <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.0b72.png" sizes="192x192">
      <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.7353.png" sizes="16x16">
      <link rel="manifest" href="/images/favicons/manifest.json">
      <meta name="msapplication-TileColor" content="#000000">
      <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png">
      <meta name="theme-color" content="#ffffff">
      <!-- End favicon for all platforms -->

      <link rel="stylesheet" href="/css/main.ee40.css"/>
      <link href='http://fonts.googleapis.com/css?family=Abril+Fatface&text=gizra' rel='stylesheet' type='text/css'>
      <link href='https://fonts.googleapis.com/css?family=Hind:400,600,300,500' rel='stylesheet' type='text/css'>
      <link href='https://fonts.googleapis.com/css?family=Raleway:400,300,600,800' rel='stylesheet' type='text/css'>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
      <!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6558346-3', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


      <!-- Begin Inspectlet Embed Code -->
      <script type="text/javascript" id="inspectletjs">
      window.__insp = window.__insp || [];
      __insp.push(['wid', 314054580]);
      (function() {
      function ldinsp(){if(typeof window.__inspld != "undefined") return; window.__inspld = 1; var insp = document.createElement('script'); insp.type = 'text/javascript'; insp.async = true; insp.id = "inspsync"; insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(insp, x); };
      setTimeout(ldinsp, 500); document.readyState != "complete" ? (window.attachEvent ? window.attachEvent('onload', ldinsp) : window.addEventListener('load', ldinsp, false)) : ldinsp();
      })();
      </script>
      <!-- End Inspectlet Embed Code -->

    </head>
    <body>

    <!-- Main content -->
    
  



  
    
      
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  


<div id="post-page">
  <header id="header-post">
    <div class="container">
      <div class="row">
        <div class="col-sm-10 col-sm-offset-1">
          
  

<nav id="nav" role="navigation" class="navbar navbar-default">
  <div class="navbar-header">
    <button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  </div>
  <div class="navbar-collapse collapse">
    <ul class="nav navbar-nav">
      <li><a href="/#about" class="smooth-scroll-to">About Us</a></li>
      <li><a href="/team">Meet the Team</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="#contact" class="smooth-scroll-to">Contact</a></li>
    </ul>
  </div>
</nav>

  <h2 class="gizra-logo"><a href="/">gizra</a></h2>



        </div>
      </div>
    </div>
  </header>

  <div class="content-container">
    <article class="post">
      <h1><a href="/content/elm-i18n-type-safety">Elm i18n and Type Safety </a></h1>
      <div class="date">24 Mar 2016, By Amitai Burstein</div>
      <div class="tags">
        <img src="/images/post/tag-icon-small.15a8.png" class="tags-icon"/>
        <ul class="inline">
          
          

  
    
      <li><a href="/tags.html#Elm-ref">Elm</a></li>
    
  


        </ul>
        </div>
      <div class="post-content">

        <p>We&#39;ve reached the point we needed to translate one of our Elm apps to multiple languages.</p>

<div class="demo-block text-center">
  <a class="demo" target=_blank" href="https://gizra.github.io/elm-i18n-example/">View demo</a>
  <a class="code" target=_blank" href="https://github.com/Gizra/elm-i18n-example">Get the source code</a>
</div>

<div class="thumbnail">
  <div class="img-wrapper">

    

    
      <img src="http://www.gizra.com/assets/images/posts/elm-i18n/image1.gif">
    

  </div>
  
</div>

<p>We looked for existing solutions and stumbled upon the elm-i18n library. This
of course made us happy, to see that someone has already solved the problem for us. However, when we looked at the <a href="https://github.com/lukewestby/elm-i18n/tree/84d7da3a51d52a89d1e3371bfeb4f34eab05341c#example">example</a> something felt missing. Type safety.</p>

<p>In Gizra we deal most hours of our working days with PHP, so you can say we are
fearless developers. That is, we hope and believe our code is right, and
worst case we know we will catch our bugs on run time.</p>

<p>But Elm can make us better developers, and give us some safety!</p>

<!-- more -->

<h2>Type Safety</h2>

<p>If you look at <code>show (i18nText &quot;I am {0} years old.&quot; [&quot;24&quot;])</code> you might notice that there is no guarantee that the string is even translated to other languages. Further more, are we sure that we are sending the correct number of arguments (in the above case it&#39;s <code>24</code>)?</p>

<p>I jumped into the Elm channel and had a very nice chat with @lukewestby, elm-i18n library author, which pointed out some really good points (like the need for type safety not just for the strings, but for the arguments as-well).</p>

<p>This was no doubt yet another case for the great power of open source, collaboration, and friendly community: I came to the chat with a half baked solution, and left with a complete one.</p>

<p>The entire logic of the translation is in <a href="https://github.com/Gizra/elm-i18n-example/blob/master/Translation/Utils.elm">this</a> short file. We define our translation as types.</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="kr">type</span> <span class="kt">TranslationId</span>
  <span class="ow">=</span> <span class="kt">Login</span>
  <span class="o">|</span> <span class="kt">WelcomeBack</span> <span class="p">{</span><span class="n">name</span> <span class="kt">:</span> <span class="kt">String</span><span class="p">}</span>
</code></pre></div>
<p>All the strings in our app will be represented in this <code>TranslationId</code> type, along with their required arguments. By having this, we can now do things like:</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="nf">div</span> <span class="kt">[]</span> <span class="p">[</span><span class="n">text</span> <span class="o">&lt;|</span> <span class="n">translate</span> <span class="kt">Spanish</span> <span class="kt">Login</span><span class="p">]</span>
<span class="c1">-- Result: &quot;Por favor haga login&quot;</span>

<span class="nf">div</span> <span class="kt">[]</span> <span class="p">[</span><span class="n">text</span> <span class="o">&lt;|</span> <span class="n">translate</span> <span class="kt">English</span> <span class="o">&lt;|</span> <span class="kt">WelcomeBack</span> <span class="p">{</span><span class="n">name</span> <span class="ow">=</span> <span class="s">&quot;Elm lover&quot;</span><span class="p">}]</span>
<span class="c1">-- Result: &quot;Welcome back Elm lover&quot;</span>
</code></pre></div>
<p>This is one of the great powers of Elm! By having those types, we let the compiler help us with preventing silly mistakes.</p>

<p>We can now never try to translate a non existing string. We also can not try to call a string, without passing all the arguments.
Or, we can&#39;t ever miss translating an existing string.<br>
It&#39;s all covered by Elm&#39;s types.</p>

<p>Go ahead, and see the <a href="https://github.com/Gizra/elm-i18n-example/blob/master/App/View.elm#L11">View.elm</a> file or the <a href="https://github.com/Gizra/elm-i18n-example/blob/master/Translation/Test.elm">unit tests</a>.</p>

<h2>Next steps</h2>

<p>Developers don&#39;t necessarily speak all the app&#39;s languages. I mean, we are a smart bunch, but there&#39;s a limit, right? :)</p>

<p>What often happens is that translation is written in different text files (e.g. in PO format). So our next plan is to write a script that will get as input those files, and will auto-generate an Elm file that will contain
valid code with all the strings.</p>


      </div>
    </article>
    <section class="post-nav">
      <div class="row">
        <div class="col-xs-6 previous">
          
          <div class="text-capitalize">
            <a href="/content/budget-goggles">
              Previous
              <span class="visible-xs"> post</span>
            </a>
          </div>
          <a href="/content/budget-goggles" class="prev-text">
            <span class="hidden-xs">Budget Goggles - creating a common language and setting expectations</span>
          </a>
          
        </div>
        <div class="col-xs-6 next">
          
          <div class="text-capitalize">
            <a href="/content/how-think-elm">
              Next
              <span class="visible-xs"> post</span>
            </a>
          </div>
          <a href="/content/how-think-elm" class="next-text">
            <span class="hidden-xs">How To Think Elm</span>
          </a>
          
        </div>
      </div>
    </section>
    <section class="author-details">
      <div class="image-wrapper">
        <img src="/images/team/avatars/amitaibu.42a1.jpg" class="img-circle img-responsive">
      </div>
      <div class="text-wrapper">
        <span class="name">Amitai Burstein</span>
        
          <span class="twitter">(@amitaibu)</span>
        
        <div class="title">CTO, Co-Owner</div>
        <div class="bio">Maintainer of Organic groups, the Message stack, and co-maintainer of Drupal 8's Entity reference. <a href="/content/the-about-story/">The about story</a>.</div>
      </div>
    </section>
    <section>
      <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'gizra';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </section>
  </div>
</div>


    <!--Footer -->
    
  <div id="contact">
    <footer id="footer">
      <div class="footer-wrapper">
        <div class="background">
          <div class="container">
            <div class="row">
              <div class="col-sm-12">
                <h2 class="title">Talk to us</h2>
                <div class="clearfix">
                  <address>
                    <div class="strong">Israel Headquarters</div>
                    <span>5 Brenner Street, Tel Aviv</span>
                      <a class="telephone" href="tel:+97233731222">+972-3-3731222</a>
                    <a class="email" href="mailto:info@gizra.com">info@gizra.com</a>
                  </address>
                  <address class="separator">
                    <div class="strong">United States Office</div>
                    <span>157 Columbus Avenue, 4th Floor, New York, NY 10023</span>
                    <a class="telephone" href="tel:+13476864508">347-686-4508</a>
                    <a class="email" href="mailto:usoffice@gizra.com">usoffice@gizra.com</a>
                  </address>
                  <div class="separator social-links">
                    <span class="link github">
                      <a href="https://github.com/Gizra" target="_blank"><i class="fa fa-github-square"></i></a>
                    </span>
                    <span class="link twitter">
                      <a href="https://twitter.com/gizra_drupal" target="_blank"><i class="fa fa-twitter-square"></i></a>
                    </span>
                    <span class="link linkedin">
                      <a href="https://www.linkedin.com/company/gizra-ltd" target="_blank"><i class="fa fa-linkedin-square"></i></a>
                    </span>
                    <span class="link facebook">
                      <a href="https://www.facebook.com/gizraltd/timeline" target="_blank"><i class="fa fa-facebook-square"></i></a>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </div>



    <script src="/js/plugins.7686.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script>

    <script src="/js/scripts.ddd6.js"></script>
    </body>
</html>
