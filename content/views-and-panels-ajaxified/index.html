<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Views and Panels Ajaxified</title><meta name=viewport content="width=device-width"><link rel=stylesheet href=/css/main.ff28.css><link href="http://fonts.googleapis.com/css?family=Abril+Fatface" rel=stylesheet type=text/css></head><body><header class=white><div class=container><div class=logo><a href="/">gizra</a></div><nav id=nav role=navigation class="navbar navbar-default nav-fixed"><div class=navbar-header><button data-target=.navbar-collapse data-toggle=collapse class=navbar-toggle type=button><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href=/products>Products</a></li><li><a href=/#about>About</a></li><li><a href=/#work>Work</a></li><li><a href=/#code>Showcase</a></li><li><a href=/blog class=active>Blog</a></li><li><a href=/#contact>Contact</a></li></ul></div></nav></div><!-- End of container --></header><section id=post-page><div class=background><img src=/images/post/background.2707.png></div><div class=ballons></div><div class=post-back><a href=/blog><img src=/images/post/post-back.fca6.png></a></div><div class=content><div class=container><div class=row><div class="col-md-12 post"><div class=row><div class="post-label col-xs-12"><a href="/content/views-and-panels-ajaxified/">Views and Panels Ajaxified</a></div></div><div class="row small-row"><div class="date col-md-3 col-sm-3 col-xs-4">30 Jun 2010</div><div class="seprator col-md-1 col-sm-1 col-xs-1">|</div><div class="author col-md-8 col-sm-7 col-xs-6">By Amitai Burstein</div></div><div class="row small-row"><div class="tags col-sm-9"><ul class=inline><li><a href=/tags.html#Panels-ref>Panels</a></li><li><a href=/tags.html#CTools-ref>CTools</a></li><li><a href=/tags.html#Drupal-planet-ref>Drupal-planet</a></li></ul></div><div class="comments-count col-sm-3"><a href=http://www.gizra.com/content/views-and-panels-ajaxified/#disqus_thread></a></div></div><div class=row><div class="col-xs-12 post-content"><p>If you haven&#39;t read Roger Lopez <a href=http://zroger.com/node/30>Ajax without Javascript</a> take a 5 minutes break and do it. If you are not a developer and all this code makes you frightened then you are excused. This post will also have a little code, but take a big breath and you&#39;ll see how easy it is to Ajaxify your Panels!</p><ol><li>Download this <a href=/assets/images/legacy/story_list_0.zip>feature</a> and the related modules <code>drush dl ctools panels views && drush en page_manager panels views_content views_ui story_list php -y</code></li><li>Add a few story nodes (title and body), or use Devel generate module to do it for you</li><li>Navigate to <code>/story-list</code> and you should see a list of the last 10 stories on the left and the body of the first story on the right</li><li>Click on any of the titles and notice how the body text changes, without any page load. Hooray!</li></ol><!-- more --><p><img src=/assets/images/legacy/snap1.png></p><p>Lets go over the things we did to achieve this behavior:<ol><li>We have created a View that has two different displays. The &quot;Story list&quot; shows a list of 10 stories. The fields of this display are the node ID which is &quot;excluded from display&quot; and the node title. In the node title configuration we disabled the &quot;Link field to its node&quot;, and we craft our own link so it will link to the new Panels page we created. We also add <code>ctool-use-ajax</code> css class, which will ajaxify those links</li></ol></p><p><img src=/assets/images/legacy/snap2.png></p><p><li>In the story list view we add one line of PHP in the header - <code>ctools_add_js(&#39;ajax-responder&#39;);</code> This line will make sure that &quot;somebody&quot; is listening to our ajax links</li></p><p><img src=/assets/images/legacy/snap3_0.png></p><p><li>In the panel page, we add to the right pane a generic css class <code>ajax-result-pane</code>. When the ajax command will want to replace the existing text with the new text it will look for this class</li></p><p><img src=/assets/images/legacy/snap5.png></p><p><img src=/assets/images/legacy/snap6.png></p><p><li>Next we have our custom code, which is in the <code>.module</code> file. I won&#39;t go over every line of code, since it is well documented. Even if you are not a developer it should be pretty clear from the comments what needs to be replaced in order to re-use the code for your own needs</li></p></div></div><div class=row><div class="col-xs-12 bottom-dash"></div></div><div class="row post-nav"><div class=col-xs-6><div class=previous><a href="/content/message-module-and-ctools-plugin/">Previous</a></div><a href="/content/message-module-and-ctools-plugin/" class=prev-text>Message module and CTools $plugin</a></div><div class=col-xs-6><div class=next><a href="/content/let-sleeping-dogs-lie/">Next</a></div><a href="/content/let-sleeping-dogs-lie/" class=next-text>Let sleeping dogs lie</a></div></div><div class="row author-details"><div class="col-md-1 image-wrapper"><img src=/images/team/amitaibu.4179.jpg class=img-responsive></div><div class="col-md-11 text-wrapper"><span class=name>Amitai Burstein</span> <span class=twitter>(@amitaibu)</span><div class=title>CTO, Co-Owner</div><div class=bio>Maintainer of Organic groups, the Message stack, and co-maintainer of Drupal 8's Entity reference. Also likes climbing boulders.</div></div></div><div class=row><div class="col-xs-12 bottom-dash-small"></div></div></div></div></div></div></section><div id=disqus_thread></div><script type=text/javascript>var disqus_developer = 1;
    var disqus_shortname = 'gizra';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><script type=text/javascript>var disqus_shortname = 'gizra';

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());</script><script src=/_bower_components/jquery/jquery.js></script><script src=scripts/plugins.js></script><script src=/js/scripts.fb35.js></script><!-- Google Analytics --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');  // Replace with your property ID.
  ga('send', 'pageview');</script><!-- End Google Analytics --></body></html>