<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Your Project. The Gizra Way</title>
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="/css/main.da78.css"/>

        <link href='http://fonts.googleapis.com/css?family=Abril+Fatface' rel='stylesheet' type='text/css'>

        <!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6558346-3', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


    </head>
    <body>

    

    <header class="white">
      <div class="container">
        <div class="logo"><a href="/">gizra</a></div>
        <nav id="nav" role="navigation" class="navbar navbar-default nav-fixed">
          <div class="navbar-header">
            <button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>
          <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li><a href="/#work">Work</a></li>
              <li><a href="/#about">About</a></li>
              <li><a href="/blog">Blog</a></li>
              <li><a href="/team">Team</a></li>
              <li><a href="/#contact">Contact</a></li>
            </ul>
          </div>
        </nav>
      </div> <!-- End of container -->
    </header>

    


    <section id="blog-page">
  <div class="background">
    <img src="/images/post/background.71f5.png">
  </div>

  <div class="blog-title">
    <h2>Blog</h2>
  </div>

  <div class="content">
    <div class="container">

      

      
        
      

      
        
          
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <!--Post begin-->
      <div class="row">
        <div class="col-md-8 col-md-offset-2 post">

          <div class="row">
            <div class="post-label">
              <a href="/content/commerce-product-subform/">Commerce product + Subform</a>
            </div>
          </div>

          <div class="row small-row">
            <div class="date">29 Jan 2012</div>
            <div class="seprator">|</div>
            <div class="author">By <a href="#author">Amitai Burstein</a></div>
          </div>

          <div class="row small-row">
            <div class="tags">
              
              <ul class="inline">
                
                

  
    
      <li><a href="/tags.html#Commerce-ref">Commerce</a></li>
    
      <li><a href="/tags.html#Subform-ref">Subform</a></li>
    
      <li><a href="/tags.html#CTools-ref">CTools</a></li>
    
      <li><a href="/tags.html#Drupal-planet-ref">Drupal-planet</a></li>
    
  


              </ul>
              
            </div>
            <div class="comments-count"><a href="http://www.gizra.com/blog/page12/index.html#disqus_thread"></a></div>
          </div>

          <div class="row">
            <div class="post-content">
              <p><strong>Edit: Use the <a href="http://drupal.org/project/inline_entity_form">Inline entity form</a> module that was created after this post was published.</strong></p>

<p>This post will go over an example (yet fully functionally) module that shows how we can embed a commerce product form inside a node form, and have the node reference the commerce product - without horrible hacks.</p>

            </div>
          </div>

          <div class="row">
            <div class="bottom-dash"></div>
          </div>
        </div>
      </div>
      <!--Post End-->
      

      
        
      

      
        
          
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <!--Post begin-->
      <div class="row">
        <div class="col-md-8 col-md-offset-2 post">

          <div class="row">
            <div class="post-label">
              <a href="/content/sending-lots-emails-hint-drush/">Sending LOTS of emails (Hint: with Drush)</a>
            </div>
          </div>

          <div class="row small-row">
            <div class="date">24 Jan 2012</div>
            <div class="seprator">|</div>
            <div class="author">By <a href="#author">Amitai Burstein</a></div>
          </div>

          <div class="row small-row">
            <div class="tags">
              
              <ul class="inline">
                
                

  
    
      <li><a href="/tags.html#Drupal-planet-ref">Drupal-planet</a></li>
    
      <li><a href="/tags.html#Message-ref">Message</a></li>
    
      <li><a href="/tags.html#Drush-ref">Drush</a></li>
    
  


              </ul>
              
            </div>
            <div class="comments-count"><a href="http://www.gizra.com/blog/page12/index.html#disqus_thread"></a></div>
          </div>

          <div class="row">
            <div class="post-content">
              <p>On my <a href="http://www.gizra.com/content/message-notify-multilingual-email-notifications">last blog</a> post I talked about Message notify module, and mentioned we were using it to send digest emails. While Message notify really eases the pain of creating personalized emails, and sending them, we still needed to find a scalable solutions for sending lots of emails. LOTS of emails!</p>

<p>Doing it on hook_cron() is nice if you need to send few emails, but when you need to send thousands of emails a day, it wonâ€™t do. Cron will take too long, or might hang up if we try to process too many digest emails at once.</p>

<p>A nice and simple solution we came up with, was to write a Drush command that will process a small batch of users, and use Jenkins to fire up this command every two minutes.</p>

<p>This post will demonstrate the code, that can be used by others - however you will need to copy and change the command to fit your business logic.</p>

            </div>
          </div>

          <div class="row">
            <div class="bottom-dash"></div>
          </div>
        </div>
      </div>
      <!--Post End-->
      

      
        
      

      
        
          
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <!--Post begin-->
      <div class="row">
        <div class="col-md-8 col-md-offset-2 post">

          <div class="row">
            <div class="post-label">
              <a href="/content/message-notify-multilingual-email-notifications/">Message notify - Multilingual email notifications</a>
            </div>
          </div>

          <div class="row small-row">
            <div class="date">01 Jan 2012</div>
            <div class="seprator">|</div>
            <div class="author">By <a href="#author">Amitai Burstein</a></div>
          </div>

          <div class="row small-row">
            <div class="tags">
              
              <ul class="inline">
                
                

  
    
      <li><a href="/tags.html#Drupal-planet-ref">Drupal-planet</a></li>
    
      <li><a href="/tags.html#Message-ref">Message</a></li>
    
  


              </ul>
              
            </div>
            <div class="comments-count"><a href="http://www.gizra.com/blog/page12/index.html#disqus_thread"></a></div>
          </div>

          <div class="row">
            <div class="post-content">
              <p>Email notification is a convenient way to be updated about new content or comments. There are several modules in Drupal that already deal with this issue, and I would like to propose another solution, and highlight the advantages of using it. The new system relies on <a href="http://drupal.org/project/message_notify">Message-notify</a> module, which depends on the Message module -  a general logging system (think activity stream, but without a fancy query builder).</p>

<p>Message module itself is pretty simple. You can have different message types, and when you want to create a message, you actually create a new entity called Message.</p>

            </div>
          </div>

          <div class="row">
            <div class="bottom-dash"></div>
          </div>
        </div>
      </div>
      <!--Post End-->
      

      
        
      

      
        
          
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <!--Post begin-->
      <div class="row">
        <div class="col-md-8 col-md-offset-2 post">

          <div class="row">
            <div class="post-label">
              <a href="/content/og7-and-entity-reference-part-2/">OG7 and Entity reference - Part 2</a>
            </div>
          </div>

          <div class="row small-row">
            <div class="date">07 Dec 2011</div>
            <div class="seprator">|</div>
            <div class="author">By <a href="#author">Amitai Burstein</a></div>
          </div>

          <div class="row small-row">
            <div class="tags">
              
              <ul class="inline">
                
                

  
    
      <li><a href="/tags.html#Drupal-planet-ref">Drupal-planet</a></li>
    
      <li><a href="/tags.html#OG7-ref">OG7</a></li>
    
  


              </ul>
              
            </div>
            <div class="comments-count"><a href="http://www.gizra.com/blog/page12/index.html#disqus_thread"></a></div>
          </div>

          <div class="row">
            <div class="post-content">
              <p>Following my <a href="http://www.gizra.com/content/og7-and-entity-reference-sponsor-me">previous</a> post, and after getting some great reaction from the community via IRC and in Drupalcamp Toulouse, Iâ€™d like to share both my thoughts about the sponsoring and about the technical stuff.</p>

<p>The sponsoring, which already has <a href="http://funnymonkey.com/">FunnyMonkey</a> committing to pay almost half the price, and providing on top of that developer hours, was something Iâ€™ve decided to do only after I was convinced there are some big players using OG7.
The thing is that _anyway I intend to do this change. The sponsoring is just giving it a boost, and making sure it will be _sooner than later!</p>

<p>Iâ€™m happy I was able to post that request and to get good reaction from the community.
Iâ€™m equally happy that Planet Drupal isnâ€™t swamped with such requests. Itâ€™s not about Drupal App. Itâ€™s about harnessing the community towards a goal. Companies offering to assist by providing developer hours is exactly the proof of that.</p>

<p>Now hereâ€™s a quick overview of the planned changes. First the conceptual changes:
<ul>
<li>Instead of OG having it&#39;s own field type, we easily hook into Entity reference field, as it allows registering our own handler using a CTools plugin</li>
<li>Instead of saving the field values <em>and the OG membership as we currently do, we save the OG membership, and use hook</em>field<em>load() to populate the Entity reference with the correct value. Yes, I know, the docs clearly say that we should not load fieldable entities in hook</em>field_load() as it might cause loading recursion, so we&#39;ll just make sure you can&#39;t attach group-audience fields to OG membership (which anyway doesn&#39;t make much sense). The benefit of doing that, after a long talk with the people form the community, notably fago (thanks again fago!), came out as the best solution for a problematic thing</li>
<li>OG membership is now tightly coupled with the field that it belongs to. This means we can care about the field cardinality (i.e. how many OG membership can be created per field), and since we know the OG membership type we can provide smarter metadata</li>
<li>We can have multiple fields, to allow subscribing users/ content to group with different membership type. No more hard-coding of the field name as-well</li>
</ul></p>

<p>Sneak preview time...
As usual we can make a content type (Clubs in this example) a group, through the content type edit.</p>

            </div>
          </div>

          <div class="row">
            <div class="bottom-dash"></div>
          </div>
        </div>
      </div>
      <!--Post End-->
      

      
        
      

      
        
          
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <!--Post begin-->
      <div class="row">
        <div class="col-md-8 col-md-offset-2 post">

          <div class="row">
            <div class="post-label">
              <a href="/content/og7-and-entity-reference-sponsor-me/">OG7 and Entity reference - Sponsor me</a>
            </div>
          </div>

          <div class="row small-row">
            <div class="date">20 Nov 2011</div>
            <div class="seprator">|</div>
            <div class="author">By <a href="#author">Amitai Burstein</a></div>
          </div>

          <div class="row small-row">
            <div class="tags">
              
              <ul class="inline">
                
                

  
    
      <li><a href="/tags.html#Drupal-planet-ref">Drupal-planet</a></li>
    
      <li><a href="/tags.html#OG7-ref">OG7</a></li>
    
  


              </ul>
              
            </div>
            <div class="comments-count"><a href="http://www.gizra.com/blog/page12/index.html#disqus_thread"></a></div>
          </div>

          <div class="row">
            <div class="post-content">
              <ul>
<li>Update 3: <a href="http://treehouseagency.com/">Treehouse Agency</a> are sponsoring and providing developer help</li>
<li>Update 2: Dev version is out</li>
<li>Update 1: <a href="http://funnymonkey.com/">FunnyMonkey</a> are sponsoring and providing developer help</li>
</ul>

<p>I was walking back home from work and thinking to myself Drupal thoughts. One of the thought was about OG7 and its use of &quot;group&quot; entity. At the time of writing OG it seemed as a good idea. It allows flexibility of showing all the groups of the site, without worrying what entity type they are (as the group ID isnâ€™t equal to the node ID).
It also allows easier internalization of group nodes, as again the group ID isnâ€™t the node ID.
In a very Drupal like way, in the other side of the world, a day later fago was asking the same question.</p>

<p>After more than a year that OG7 is out, it seems that the flexibility of showing all the groups at once has a price in complexion. It makes Views require one more relationship. It makes Panels require one more relationship. It makes creating Rules and using tokens a non-intuitive task.
I&#39;ve opened a new <a href="http://drupal.org/node/1342632">issue</a>, with one thing in mind -- deprecating the group entity, and making OG even slimmer and even more robust.
The idea is to rely on the new kid on the block - Entity Reference, which means your reference field will know how to reference a group of a single entity type. That change will result with changing the signature of a lot of function in OG (i.e. instead of passing the group ID, one will have to pass the entity type of the group, and the entity ID of the group), but it will also result with better UX and DX.</p>

<p>The idea is to create a 2.x branch, to allow people to migrate from 1.x. I honestly donâ€™t think it will be very painful, as Iâ€™ll provide automatic migration of data. So it will be just a matter of updating the Views, Panels and custom code.
In the above issue there are already comments from known community members giving it a big +1, and saying &quot;Letâ€™s see this sooner than later&quot;. I also want to see this happening _fast, but my time resources are not enough.</p>

<p>Iâ€™m looking for someone to sponsor this huge and non-trivial feature, which will cost US$7,500
Please do <a href="http://www.gizra.com/contact">contact</a> me if you are interested. I will credit you on the OG module page, in the README file, and on this blog. The community will thank you greatly.</p>

            </div>
          </div>

          <div class="row">
            <div class="bottom-dash"></div>
          </div>
        </div>
      </div>
      <!--Post End-->
      

      <!--Pager Begin-->

      <div class="row">
        <div class="col-md-8 col-md-offset-2">
          <div class="row pager-wrapper">
            <ul id="pager">

              <li class="prev">
              
                <a href="/blog/page11"></a>
              
              </li>

              <li class="next">
              
                <a href="/blog/page13"></a>
              
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!--Pager End-->
    </div>
  </div>
</section>



    <script src="/js/plugins.5250.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script>

    <script src="/js/scripts.87fd.js"></script>

    </body>
</html>
